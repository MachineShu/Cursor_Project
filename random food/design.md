# 项目设计文档

## 目录结构
.
├── miniprogram/ # 小程序源码
│ ├── pages/ # 页面文件
│ │ ├── index/ # 首页
│ │ └── logs/ # 日志页
│ ├── app.ts # 小程序入口
│ ├── app.json # 小程序配置
│ └── app.wxss # 全局样式
├── typings/ # TypeScript 类型定义
│ ├── index.d.ts # 全局类型
│ └── types/ # 详细类型定义
├── project.config.json # 项目配置
└── tsconfig.json # TypeScript 配置

## 技术要点

### 开发环境
- TypeScript 开发
- 严格的类型检查 (strict mode)
- 微信开发者工具

### 框架特性
- 微信小程序原生框架
- glass-easel 组件系统
- 页面基于 Component 构建

### 基础功能
- 用户信息获取与展示
- 页面路由系统
- 本地数据存储
- 基础UI组件

### TypeScript 配置
- strictNullChecks
- noImplicitAny 
- noImplicitThis
- alwaysStrict
- 完整的类型定义

### 目前已实现
- 基础框架搭建
- 用户授权流程
- 页面基础布局
- TypeScript 类型系统集成

## 待开发功能
_待补充_

## 注意事项
1. 遵循微信小程序开发规范
2. 保持 TypeScript 类型定义完整性
3. 遵循组件化开发方案
4. 注意性能优化

## 首页设计要点

### 功能需求

#### 核心随机功能
- 随机抽取展示多个美食选项
- 支持按预算、口味等条件筛选
- 防重复结果机制
- 支持固定选项池随机
- 支持扩大/缩小选项池

#### 快捷操作功能
- 重新随机按钮
- 收藏/取消收藏
- 加入/移出黑名单
- 分享当前结果
- 查看美食详情
- 一键导航功能

#### 历史记录功能
- 记录随机结果历史
- 按日期分类展示
- 统计分析功能
  - 最常吃什么
  - 最近一周记录
  - 收藏最多的类型

#### 辅助功能
- 今日推荐美食
- 用餐人数选择
- 心情标签筛选
- 天气/时段智能推荐
- 附近商家优先展示

### 交互设计
- 随机触发方式设计
  - 按钮点击触发
  - 下拉刷新触发
  - 摇一摇触发
  - 转盘/老虎机式交互
- 结果展示形式
  - 卡片式布局
  - 包含图片/名称/价格/距离等信息
  - 横向滑动或堆叠式展示
  - 支持左右滑动选择
- 动画效果设计
  - 随机过程动效
  - 结果展示强调效果
  - 卡片切换动画
  - 性能优化考虑
- 快捷操作按钮布局
  - 核心功能突出展示
  - 次要功能合理布局
  - 手势操作区域设计
- 用户操作流程
  - 首次使用引导
  - 快捷操作提示
  - 结果确认流程
  - 异常情况处理

### 数据设计
- 美食数据结构设计
  - 基础信息字段
    * 名称、图片、价格区间
    * 美食类型、口味标签
    * 适合人数、推荐场景
  - 扩展信息字段
    * 商家地址、营业时间
    * 评分、人气程度
    * 特色推荐、注意事项
  - 用户交互信息
    * 收藏状态
    * 黑名单标记
    * 最近选择时间
  - 统计信息
    * 展示次数
    * 选中次数
    * 收藏次数
- 默认美食数据
  - 基础美食库
  - 分类管理
  - 定期更新机制
- 用户自定义数据
  - 新增/编辑/删除
  - 数据验证
  - 本地存储
- 历史记录存储
  - 记录结构设计
  - 存储容量控制
  - 清理策略
- 黑名单管理
  - 黑名单规则
  - 自动解除机制
  - 存储方式

### 性能考虑
- 数据加载策略
- 动画性能优化
- 存储容量控制

### 其他考虑
- 分时段推荐(早餐/午餐/晚餐)
- 位置服务集成
- 个性化推荐


